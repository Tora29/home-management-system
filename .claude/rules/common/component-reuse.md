# コンポーネント再利用ルール

## 基本方針

1. **新規コンポーネント作成前に `app/shared/components/` を確認する**
2. **汎用的なコンポーネントは shared に集約する**
3. **ルート固有のコンポーネントは各ルートの `components/` に配置する**

---

## 共通コンポーネントの確認手順

UI コンポーネントを作成・リファクタリングする前に、以下を確認する。

1. `app/shared/components/` 配下に再利用可能なコンポーネントがないか確認
2. 存在する場合は既存のものを使用
3. 存在しない場合は新規作成を検討

---

## 汎用化の判断基準

以下の**両方**を満たす場合、`shared/components/` に配置する。

| 条件                               | 説明                                    |
| ---------------------------------- | --------------------------------------- |
| 2 箇所以上で使用される見込みがある | 実際に使われている、または使われる予定  |
| ルート固有のロジックを含まない     | 特定の loader/action データに依存しない |

---

## 配置場所の判断

```
コンポーネントを作成したい
    │
    ├─ 2箇所以上で使われる？
    │   │
    │   ├─ YES → ルート固有ロジックを含む？
    │   │         ├─ YES → 各ルートの components/ に配置
    │   │         └─ NO  → shared/components/ に配置
    │   │
    │   └─ NO → 各ルートの components/ に配置
    │
    └─ 判断がつかない場合 → まず各ルートに配置し、再利用時に shared へ移動
```

---

## 現在の共通コンポーネント

| コンポーネント | 用途                             |
| -------------- | -------------------------------- |
| `InputField`   | M3 Outlined Text Field（入力欄） |
| `FormSection`  | タイトル付きカードラッパー       |
| `ErrorMessage` | エラーメッセージ表示             |

---

## 禁止事項

- 同じ UI パターンを複数箇所で重複実装しない
- 1 箇所でしか使わないコンポーネントを shared に入れない（過度な抽象化）
- shared コンポーネント内でルート固有のデータ型に依存しない
