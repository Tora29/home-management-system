---
allowed-tools: Read, Write, Edit, Glob, Grep, AskUserQuestion
description: "UIコンポーネントを分割してリファクタリングします"
---

# Custom Command: Refactor UI Components

指定されたルートファイル内のJSX（UI部分）が肥大化しているため、可読性を高めるためにコンポーネント分割を行ってください。

## リファクタリング手順

1. **Route Folderの作成 (必要な場合):**
   - 対象が単一ファイル（例: `routes/users.tsx`）の場合、同名のディレクトリを作成し (`routes/users/`)、その中に `route.tsx` として本体を移動してください。
   - 既にディレクトリ構成の場合はそのまま進めてください。

2. **コンポーネントの分離:**
   - 指定されたUI部分（または巨大な部分）を、別コンポーネントとして切り出してください。
   - 切り出したコンポーネントは、**`components/` サブディレクトリ**に配置してください。
   - 共通の型や定数がある場合は `types.ts` に集約してください。
   - **重要:** 汎用的な部品でない限り、`app/components/`（グローバル）には移動しないでください。

3. **共通コンポーネントの確認:**
   - `app/shared/components/` 配下の既存コンポーネントを確認し、再利用可能なものがないかチェックしてください。
   - 切り出すコンポーネント内で汎用的なパーツ（入力フィールド、カード、エラー表示など）がある場合は、既存のものを使用してください。
   - **汎用化の判断基準:**
     - 2箇所以上で使われている、または使われる見込みがある場合
     - ルート固有のロジックを含まない場合
   - 汎用化できそうな新規コンポーネントがあれば、`shared/components/` への移動を検討してください。

4. **Propsの設計:**
   - 親コンポーネントから必要なデータのみを Props として渡すように設計してください。
   - `loader` のデータ型全体を渡すのではなく、必要な断片のみを渡すことを推奨します。

5. **再エクスポート禁止:**
   - 後方互換性のための再エクスポートは使わないでください。
   - 既存のインポートパスを変更し、実体の場所から直接インポートするように修正してください。

## 出力要件

- 新しいディレクトリ構成案
- 新規作成するコンポーネントコード
- 修正後の親コンポーネントコード

---

## 実行手順

まず、AskUserQuestion ツールを使ってユーザーに以下を質問してください：

1. 「対象のファイルを入力してください（例: app/routes/users.tsx）」
2. 「切り出したい箇所を教えてください（例: ユーザーリストのテーブル部分）」

ユーザーから回答を得てから、上記のルールに従ってリファクタリングを開始してください。
